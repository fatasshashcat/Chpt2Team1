<pre><font color="#007f69">breed</font><font color="#000000"> [cops cop]<br /></font><font color="#660096">breed</font><font color="#000000"> [citizens citizen]<br /></font><font color="#660096">breed</font><font color="#000000"> [prisoners prisoner]<br /><br /></font><font color="#007f69">extensions</font><font color="#000000"> [vid]<br /><br /><br /></font><font color="#007f69">globals</font><font color="#000000"> [<br />  Source<br />  prison-region<br />  restaurant-region<br />  destination-region<br />  work-region<br />]<br /><br /></font><font color="#007f69">citizens-own</font><font color="#000000">[<br />  state<br />  time-in-prison<br />  </font><font color="#5a5a5a">;working?</font><font color="#000000"><br />  time-working<br />  time-home<br />]<br /><br /></font><font color="#007f69">cops-own</font><font color="#000000"> [<br /> state<br /> time-in-restaurant<br /> time-out-of-restaurant<br />]<br /><br /></font><font color="#007f69">to</font><font color="#000000"> start-recorder <br />  </font><font color="#0000aa">carefully</font><font color="#000000"> [ vid:start-recorder] [ </font><font color="#0000aa">user-message</font><font color="#000000"> </font><font color="#660096">error-message</font><font color="#000000"> ] <br /></font><font color="#007f69">end</font><font color="#000000">  <br /><br /></font><font color="#007f69">to</font><font color="#000000"> reset-recorder <br />  </font><font color="#0000aa">let</font><font color="#000000"> message (</font><font color="#660096">word</font><font color="#000000">     </font><font color="#963700">&quot;If you reset the recorder, the current recording will be lost.&quot;</font><font color="#000000">     </font><font color="#963700">&quot;Are you sure you want to reset the recorder?&quot;</font><font color="#000000">) <br />  </font><font color="#0000aa">if</font><font color="#000000"> vid:recorder-status </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;inactive&quot;</font><font color="#000000"> </font><font color="#660096">or</font><font color="#000000"> </font><font color="#660096">user-yes-or-no?</font><font color="#000000"> message [ <br />    vid:reset-recorder <br />  ] <br /></font><font color="#007f69">end</font><font color="#000000">  <br /><br /></font><font color="#007f69">to</font><font color="#000000"> save-recording <br />  </font><font color="#0000aa">if</font><font color="#000000"> vid:recorder-status </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;inactive&quot;</font><font color="#000000"> [<br />    </font><font color="#0000aa">user-message</font><font color="#000000"> </font><font color="#963700">&quot;The recorder is inactive. There is nothing to save.&quot;</font><font color="#000000"> <br />    </font><font color="#0000aa">stop</font><font color="#000000"> <br />  ] <br />  </font><font color="#5a5a5a">; prompt user for movie location </font><font color="#000000"><br />  </font><font color="#0000aa">user-message</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000">     </font><font color="#963700">&quot;Choose a name for your movie file (the &quot;</font><font color="#000000">     </font><font color="#963700">&quot;.mp4 extension will be automatically added).&quot;</font><font color="#000000">) <br />  </font><font color="#0000aa">let</font><font color="#000000"> path </font><font color="#660096">user-new-file</font><font color="#000000">   </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">is-string?</font><font color="#000000"> path [ </font><font color="#0000aa">stop</font><font color="#000000"> ]<br />  </font><font color="#5a5a5a">; stop if user canceled </font><font color="#000000"><br />  </font><font color="#5a5a5a">; export the movie </font><font color="#000000"><br />  </font><font color="#0000aa">carefully</font><font color="#000000"> [ <br />    vid:save-recording path <br />    </font><font color="#0000aa">user-message</font><font color="#000000"> (</font><font color="#660096">word</font><font color="#000000"> </font><font color="#963700">&quot;Exported movie to &quot;</font><font color="#000000"> path </font><font color="#963700">&quot;.&quot;</font><font color="#000000">) <br />  ] [ <br />    </font><font color="#0000aa">user-message</font><font color="#000000"> </font><font color="#660096">error-message</font><font color="#000000"> <br />  ] <br /></font><font color="#007f69">end</font><font color="#000000"> <br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup<br />  </font><font color="#0000aa">clear-all</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> prison-region </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">min-pxcor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">25</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">max-pxcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">min-pycor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">25</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">max-pycor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000">]<br />  </font><font color="#0000aa">set</font><font color="#000000"> restaurant-region </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">min-pxcor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">max-pxcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">25</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">min-pycor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">max-pycor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">25</font><font color="#000000">]<br />  </font><font color="#0000aa">set</font><font color="#000000"> destination-region </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">max-pycor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">10</font><font color="#000000">]<br />  </font><font color="#0000aa">set</font><font color="#000000"> work-region </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#660096">max-pxcor</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">10</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pycor</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#660096">min-pycor</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">10</font><font color="#000000">]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> prison-region [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">yellow</font><font color="#000000"> ]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> restaurant-region [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"> ]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> destination-region [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000"> ]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> work-region [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"> ]<br />  create-cops cop-amount [<br />    </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;car&quot;</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label</font><font color="#000000"> </font><font color="#660096">who</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label-color</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> state </font><font color="#963700">&quot;not-hungry&quot;</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> time-out-of-restaurant </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">10</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> time-in-restaurant </font><font color="#963700">0</font><font color="#000000"><br />  ]<br />  create-citizens citizen-amount [<br />    </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;person&quot;</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label</font><font color="#000000"> </font><font color="#660096">who</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label-color</font><font color="#000000"> </font><font color="#963700">pink</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> state </font><font color="#963700">&quot;moving-home&quot;</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> time-in-prison </font><font color="#963700">0</font><font color="#000000"><br />    </font><font color="#5a5a5a">;set working false</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> time-working </font><font color="#963700">0</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> time-home </font><font color="#963700">0</font><font color="#000000"><br />  ]<br />  </font><font color="#0000aa">reset-ticks</font><font color="#000000"><br />      </font><font color="#5a5a5a">;recorder </font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> vid:recorder-status </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;recording&quot;</font><font color="#000000"> [ <br />    </font><font color="#0000aa">if</font><font color="#000000"> Source </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;Only View&quot;</font><font color="#000000"> [vid:record-view]<br />    </font><font color="#5a5a5a">; records the plane </font><font color="#000000"><br />    </font><font color="#0000aa">if</font><font color="#000000"> Source </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;With Interface&quot;</font><font color="#000000"> [vid:record-interface]<br />    </font><font color="#5a5a5a">; records the interface </font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> go<br />  move-home-citizens<br />  move-cops<br />  </font><font color="#0000aa">tick</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> vid:recorder-status </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;recording&quot;</font><font color="#000000"> [ <br />    </font><font color="#0000aa">if</font><font color="#000000"> Source </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;Only View&quot;</font><font color="#000000"> [vid:record-view]<br />    </font><font color="#5a5a5a">; records the plane </font><font color="#000000"><br />    </font><font color="#0000aa">if</font><font color="#000000"> Source </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;With Interface&quot;</font><font color="#000000"> [vid:record-interface]<br />    </font><font color="#5a5a5a">; records the interface </font><font color="#000000"><br />  ] <br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> move-home-citizens<br />  </font><font color="#0000aa">ask</font><font color="#000000"> citizens [<br />    </font><font color="#0000aa">if</font><font color="#000000"> state </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;moving-home&quot;</font><font color="#000000">[move-to-destination]<br />    </font><font color="#0000aa">if</font><font color="#000000"> state </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;moving-work&quot;</font><font color="#000000"> [move-to-work]<br />    </font><font color="#0000aa">if</font><font color="#000000"> state </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;being-arrested&quot;</font><font color="#000000">[being-arrested]<br />    </font><font color="#0000aa">if</font><font color="#000000"> state </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;in-prison&quot;</font><font color="#000000"> [in-prison]<br />    </font><font color="#0000aa">if</font><font color="#000000"> state </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;working&quot;</font><font color="#000000"> [work]<br />    </font><font color="#0000aa">if</font><font color="#000000"> state </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;free&quot;</font><font color="#000000"> [free]<br />  ]<br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> move-to-destination<br />  </font><font color="#0000aa">let</font><font color="#000000"> destination </font><font color="#660096">one-of</font><font color="#000000"> destination-region<br />  </font><font color="#0000aa">face</font><font color="#000000"> destination<br />  </font><font color="#0000aa">forward</font><font color="#000000"> citizen-speed<br />  </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">patch-here</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> destination) [<br />  </font><font color="#0000aa">set</font><font color="#000000"> state </font><font color="#963700">&quot;free&quot;</font><font color="#000000"><br />  ]<br />  </font><font color="#0000aa">let</font><font color="#000000"> nearby-cops cops </font><font color="#660096">in-radius</font><font color="#000000"> citizen-vision-range<br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> nearby-cops [<br />    run-away<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> move-to-work<br />  </font><font color="#0000aa">let</font><font color="#000000"> workarea </font><font color="#660096">one-of</font><font color="#000000"> work-region<br />  </font><font color="#0000aa">face</font><font color="#000000"> workarea<br />  </font><font color="#0000aa">forward</font><font color="#000000"> citizen-speed<br />  </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">patch-here</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> workarea) [<br />  </font><font color="#0000aa">set</font><font color="#000000"> state </font><font color="#963700">&quot;working&quot;</font><font color="#000000"><br />  ]<br />  </font><font color="#0000aa">let</font><font color="#000000"> nearby-cops cops </font><font color="#660096">in-radius</font><font color="#000000"> citizen-vision-range<br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> nearby-cops [<br />    run-away<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> run-away<br />  </font><font color="#0000aa">let</font><font color="#000000"> nearby-cops cops </font><font color="#660096">in-radius</font><font color="#000000"> citizen-vision-range<br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> nearby-cops[<br />    </font><font color="#0000aa">let</font><font color="#000000"> target </font><font color="#660096">one-of</font><font color="#000000"> nearby-cops<br />    </font><font color="#0000aa">face</font><font color="#000000"> target<br />    </font><font color="#0000aa">fd</font><font color="#000000"> (</font><font color="#963700">-1</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> citizen-speed)<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> being-arrested<br />  </font><font color="#0000aa">move-to</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> prison-region<br />  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> state </font><font color="#963700">&quot;in-prison&quot;</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> in-prison<br />  </font><font color="#0000aa">set</font><font color="#000000"> time-in-prison time-in-prison </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> time-in-prison </font><font color="#660096">&gt;=</font><font color="#000000"> prison-duration[<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> time-in-prison </font><font color="#963700">0</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> state </font><font color="#963700">&quot;moving-home&quot;</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> go-to-restaurant<br />  </font><font color="#0000aa">move-to</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> restaurant-region<br />  </font><font color="#0000aa">set</font><font color="#000000"> time-in-restaurant time-in-restaurant </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> time-in-restaurant </font><font color="#660096">&gt;=</font><font color="#000000"> </font><font color="#963700">5</font><font color="#000000"> [<br />  </font><font color="#0000aa">set</font><font color="#000000"> state </font><font color="#963700">&quot;not-hungry&quot;</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> time-in-restaurant </font><font color="#963700">0</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> time-out-of-restaurant </font><font color="#963700">0</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> chase<br />  </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">heading</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000"><br />  </font><font color="#0000aa">forward</font><font color="#000000"> cop-speed<br />  </font><font color="#0000aa">let</font><font color="#000000"> nearby-citizens citizens </font><font color="#660096">in-radius</font><font color="#000000"> cop-vision-range<br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> nearby-citizens[<br />    </font><font color="#0000aa">let</font><font color="#000000"> target </font><font color="#660096">one-of</font><font color="#000000"> nearby-citizens<br />    </font><font color="#0000aa">if</font><font color="#000000"> [state] </font><font color="#660096">of</font><font color="#000000"> target </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">&quot;in-prison&quot;</font><font color="#000000"> [<br />      </font><font color="#0000aa">if</font><font color="#000000"> [state] </font><font color="#660096">of</font><font color="#000000"> target </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">&quot;free&quot;</font><font color="#000000"> [<br />        </font><font color="#0000aa">if</font><font color="#000000"> [state] </font><font color="#660096">of</font><font color="#000000"> target </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">&quot;working&quot;</font><font color="#000000"> [<br />          </font><font color="#0000aa">face</font><font color="#000000"> target<br />          </font><font color="#0000aa">fd</font><font color="#000000"> cop-speed<br />          </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">distance</font><font color="#000000"> target </font><font color="#660096">&lt;=</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [<br />            </font><font color="#0000aa">ask</font><font color="#000000"> target[<br />              </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">!=</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">[<br />                </font><font color="#0000aa">set</font><font color="#000000"> state </font><font color="#963700">&quot;being-arrested&quot;</font><font color="#000000"><br />              ]<br />            ]<br />          ]<br />        ]<br />      ]<br />    ]<br />  ]<br />  </font><font color="#0000aa">set</font><font color="#000000"> time-out-of-restaurant time-out-of-restaurant </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> time-out-of-restaurant </font><font color="#660096">&gt;=</font><font color="#000000"> hunger [<br />    </font><font color="#0000aa">set</font><font color="#000000"> state </font><font color="#963700">&quot;hungry&quot;</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> move-cops<br />  </font><font color="#0000aa">ask</font><font color="#000000"> cops [<br />    </font><font color="#0000aa">if</font><font color="#000000"> state </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;hungry&quot;</font><font color="#000000"> [go-to-restaurant]<br />    </font><font color="#0000aa">if</font><font color="#000000"> state </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;not-hungry&quot;</font><font color="#000000"> [chase]<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> work<br />  </font><font color="#0000aa">set</font><font color="#000000"> time-working time-working </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> time-working </font><font color="#660096">&gt;=</font><font color="#000000"> </font><font color="#963700">6</font><font color="#000000"> [<br />  </font><font color="#5a5a5a">;set working? false</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> time-working </font><font color="#963700">0</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> state </font><font color="#963700">&quot;moving-home&quot;</font><font color="#000000"><br />  ]<br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> free<br />  </font><font color="#0000aa">set</font><font color="#000000"> time-home time-home </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> time-home </font><font color="#660096">&gt;=</font><font color="#000000"> </font><font color="#963700">6</font><font color="#000000"> [<br />    </font><font color="#0000aa">set</font><font color="#000000"> time-home </font><font color="#963700">0</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> state </font><font color="#963700">&quot;moving-work&quot;</font><font color="#000000"><br />  ]<br /><br /><br /></font><font color="#007f69">end</font>
</pre>
